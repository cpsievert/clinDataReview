---
title: "Introduction to the `medicalMonitoring` package"
author: "Laure Cougnaud and Michela Pasetto"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
params:
  createPatientProfiles: false
output: 
  rmarkdown::html_document:
    toc: true
    toc_float: true
    toc_depth: 5
    number_sections: true
vignette: >
  %\VignetteIndexEntry{Introduction to the medicalMonitoring package}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

# Introduction

```{r options, echo = FALSE, message = FALSE}

library(knitr)
opts_chunk$set(
    echo = TRUE, 
    results = 'asis', 
    warning = FALSE, 
    error = FALSE, message = FALSE, cache = FALSE,
    fig.width = 8, fig.height = 7,
    fig.path = "./figures_vignette/",
    #out.width = '0.7\\textwidth', 
    fig.align = 'center')#, out.height = 0.5\\textwidth', fig.path = 'graphs/') 
options(width = 170)#, stringsAsFactors = FALSE
options(warn = 1)#instead of warn = 0 by default -> to have place where warnings occur in the call to Sweave function

heightLineIn  <- 0.2

```

The package `medicalMonitoring` contains visualizations/reporting
functionalities for medical monitoring.

This vignette is introductory, and will refer to the dedicated vignettes for
specific subtopics.

```{r loadPackages, message = FALSE}

library(medicalMonitoring)
library(pander)
library(plotly)

```

# Data format

The input dataset for the workflow should be a `data.frame`, 
usually loaded from a _SAS_ data file (`sas7bdat` format).
The label of the variables stored in the `SAS` datasets is also used
for title/captions. 

The function `loadDataADaMSDTM` can be used to load your custom `SAS` dataset(s) of
interest.
This function returns two objects:

* a list of `data.frame`s containing the data for each _SAS_ dataset(s), stored
  in the `$data` slot
* a vector containing the labels for each column of the data (used e.g. for
  default titles of the figures), stored as _attributes_ of the list.

A few `sdtm` datasets are included in the
`clinUtils` package for the demonstration, via the dataset
`dataADaMCDISCP01` and corresponding variable labels.

```{r loadData}	

library(clinUtils)

data(dataADaMCDISCP01)
labelVars <- attr(dataADaMCDISCP01, "labelVars")

dataLB <- dataADaMCDISCP01$ADLBC
dataDM <- dataADaMCDISCP01$ADSL
dataAE <- dataADaMCDISCP01$ADAE

```

# Data pre-processing

A vignette for the pre-processing of data in `medicalMonitoring is available
[here](../doc/medicalMonitoring-dataPreprocessingVignette.html).

Alternatively, the vignette can be reached with 

```{r dataPreProcesVignette, eval = FALSE}

vignette("medicalMonitoring-dataPreprocessingVignette", package = "medicalMonitoring")

```

# Visualizations

A vignette for the visualizations of `medicalMonitoring is
available
[here](../doc/medicalMonitoring-dataVisualizationVignette.html).

Alternatively, the vignette can be reached with 

```{r dataVisVignette, eval = FALSE}

vignette("medicalMonitoring-dataVisualizationVignette", package = "medicalMonitoring")

```


# Medical monitoring report

A vignette for reporting with the `medicalMonitoring is available
[here](../doc/medicalMonitoring-reportingVignette.html).

Alternatively, the vignette can be reached with 

```{r reportingVignette, eval = FALSE}

vignette("medicalMonitoring-reportingVignette", package = "medicalMonitoring")

```

# Advanced users: tester/developer

To run the different tests in the package (e.g. with `R CMD check`),
the [orca](https://github.com/plotly/orca) tool is required.
Please check the installation guidelines available at:
https://github.com/plotly/orca#installation

# Appendix

## Session info

```{r includeSessionInfo, echo = FALSE}

library(pander)
pander(sessionInfo())

```
